<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<title>ajax</title>
		<style type="text/css">
			table {
				border: 1px solid #000;
			}
			
			td {
				border: 1px solid #000;
			}
		</style>
	</head>
	<body>
		<h1>Ajax与Json异步传输</h1>
		<button>Ajax与Json异步传输</button>
		
		<script type="text/javascript">
			//1.获取事件源和相关节点元素
			var btn = document.querySelector("button");
			//2.绑定时间
			btn.onclick = function() {
				//3.创建异步交互对象
				var ajax = new XMLHttpRequest();
				//4.设置请求参数
				ajax.open("GET","03.php",true);
				//5.发送请求
				ajax.send();
				//6.触发事件
				ajax.onreadystatechange = function() {
					if(ajax.readyState == 4 && ajax.status == 200) {
						//7.返回响应
						var JsonObj = JSON.parse(ajax.responseText);
						
						var str = "";
						str += "<table>";
						
						for(var i=0; i<JsonObj.length; i++) {
							str += "<tr><td>"+JsonObj[i].name+"</td><td>"+JsonObj[i].age+"</td></tr>"
						}
						
						str += "</table>";
						document.body.innerHTML = str;
					}
				}
			}
		</script>
	</body>
</html>